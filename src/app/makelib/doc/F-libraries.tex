% -*- latex -*-

\section{Available libraries}

Compiler and interactive system consist of several hundred
individual compilation units.  Like modules of application programs,
these compilation units are also organized using makelib libraries.  

Some of the libraries that make up the compiler are actually the same ones
that application programmers are likely to use, others exist for
organizational purposes only.  There are ``plugin'' libraries---mainly
for the makelib ``tools'' subsystem---that will be automatically loaded on
demand, and libraries such as {\tt \$ROOT/src/lib/core/mythryl-compiler-compiler/mythryl-compiler-compiler-for-this-platform.lib} can be used to
obtain access to functionality that by default is not present.

\subsection{Libraries for general programming}

Libraries listed in the following table provide a broad palette of
general-purpose programming tools\footnote{Recall that anchored paths
of the form {\tt \$$/x[/\cdots]$} act as an abbreviation for {\tt
\$$x/x[/\cdots]$}.}:

\begin{small}
\begin{center}
\begin{tabular}{p{1.7in}||p{3.4in}|c|c}
name & description & installed & loaded \\
\hline\hline
{\tt \$/standard.lib} & Standard Basis Library & always & auto fn
\hline\hline
{\tt \$$ROOT/src/app/yacc/lib/mythryl-yacc-lib.lib} & mythryl-yacc.library & always & no \\
\hline\hline
{\tt \$/lib7-lib.lib} & General-purpose utility library &ake7
always & auto fn
\hline
{\tt \$/posix.lib} & Unix programming utility library &
optional & no \\
\hline
{\tt \$/internet.lib} & Internet programming utility library &
optional & no \\
\hline
{\tt \$/regexp-lib.lib} & Regular expression library & optional
& no \\
\hline
{\tt \$/reactive.lib} & Reactive programming library &
optional & no \\
\hline
{\tt \$/prettyprinter.lib} & Pretty-printing library & always & no \\
\hline
{\tt \$/html.lib} & HTML handling library & always & no \\
\hline
{\tt \$/controls.lib} & Library for configurable
``controls'' & always & no \\
\hline
{\tt \$/hash-cons.lib} & hash-consing library & optional & no
\end{tabular}
\end{center}
\end{small}

\subsection{Libraries for controlling compiler operation}

The following table lists those libraries that provide access to the
so-called {\em visible compiler} infrastructure and to the compilation
manager API.

\begin{small}
\begin{center}
\begin{tabular}{p{2.3in}||p{2.5in}|c|c}
name & description & installed & loaded \\
\hline\hline
{\tt \$ROOT/src/lib/core/compiler.lib} \newline
{\tt \$ROOT/src/lib/core/compiler/mythryl-compiler-compiler-for-this-platform.lib} & visible compiler for current
architecture & always & auto fn
{\tt \$ROOT/src/lib/core/compiler/compiler.lib} & package {\tt Compiler} (the
visible compiler in one big package) & always & no \\
\hline\hline
{\tt \$ROOT/src/lib/core/makelib/makelib.lib} \newline
{\tt \$ROOT/src/lib/core/makelib/makelib.lib} & compilation manager & always & auto fn
\hline
{\tt \$ROOT/src/lib/core/makelib/tools.lib} & API for extending makelib with new tools &
always & no \\
\hline\hline
{\tt \$/mllex-tool.lib} & plugin library for ilk {\tt mllex} & always
& on demand \\
\hline
{\tt \$/lex-ext.lib} & plugin library for extension {\tt .lex} & always
& on demand \\
\hline
{\tt \$/mlyacc-tool.lib} & plugin library for ilk {\tt mlyacc} &
always & on demand \\
\hline
{\tt \$/grm-ext.lib} & plugin library for extension {\tt .grammar} & always
& on demand \\
\hline
{\tt \$/mlburg-tool.lib} & plugin library for ilk {\tt mlburg} &
always & on demand \\
\hline
{\tt \$/burg-ext.lib} & plugin library for extension {\tt .burg} &
always & on demand \\
\hline
{\tt \$/noweb-tool.lib} & plugin library for ilk {\tt noweb} & always
& on demand \\
\hline
{\tt \$/nw-ext.lib} & plugin library for extension {\tt .nw} & always &
on demand \\
\hline
{\tt \$/make-tool.lib} & plugin library for ilk {\tt make} & always &
on demand \\
\hline
{\tt \$/shell-tool.lib} & plugin library for ilk {\tt shell} & always
& on demand \\
\hline
{\tt \$/dir-tool.lib} & plugin library for ilk {\tt dir} & always
& on demand
\end{tabular}
\end{center}
\end{small}

\subsection{Libraries for compiler hackers}

The following table lists libraries that provide access to the
{\em bootstrap compiler}.  The bootstrap compiler is a derivative of
the compilation manager.  In addition to being able to recompile
the compiler for the ``host'' system there are also cross-compilers that
can target all of our supported platforms.

\begin{small}
\begin{center}
\begin{tabular}{p{2.3in}||p{2.9in}|c|c}
name & description & installed & loaded \\
\hline\hline
{\tt \$ROOT/src/lib/core/mythryl-compiler-compiler/mythryl-compiler-compiler-for-this-platform.lib} \newline
{\tt \$ROOT/src/lib/core/mythryl-compiler-compiler/mythryl-compiler-compiler-for-this-platform.lib} & bootstrap compiler for current
architecture and OS & always & no \\
\hline\hline
{\tt \$ROOT/src/lib/core/mythryl-compiler-compiler/mythryl-compiler-compiler-for-pwrpc32-macos.lib} & bootstrap compiler for PowerPC32/Unix
systems & always & no \\
\hline
{\tt \$ROOT/src/lib/core/mythryl-compiler-compiler/mythryl-compiler-compiler-for-pwrpc32-posix.lib} & bootstrap compiler for PowerPC32/MacOS
systems & always & no \\
\hline
{\tt \$ROOT/src/lib/core/mythryl-compiler-compiler/mythryl-compiler-compiler-for-sparc32-posix.lib} & bootstrap compiler for Sparc32/Unix
systems & always & no \\
\hline
{\tt \$ROOT/src/lib/core/mythryl-compiler-compiler/mythryl-compiler-compiler-for-intel32-posix.lib} & bootstrap compiler for INTEL32/Unix
systems & always & no \\
\hline
{\tt \$ROOT/src/lib/core/mythryl-compiler-compiler/mythryl-compiler-compiler-for-intel32-win32.lib} & bootstrap compiler for INTEL32/Win32
systems & always & no \\
\hline\hline
{\tt \$ROOT/src/lib/core/compiler/mythryl-compiler-for-pwrpc32.lib} & visible compiler with backend for
PowerPC-specific cross-compiler & always & no \\
\hline
{\tt \$ROOT/src/lib/core/compiler/mythryl-compiler-for-sparc32.lib} & visible compiler with backend for
Sparc32-specific cross-compiler & always & no \\
\hline
{\tt \$ROOT/src/lib/core/compiler/mythryl-compiler-for-intel32.lib} & visible compiler with backend for
INTEL32-specific cross-compiler & always & no \\
\hline
{\tt \$ROOT/src/lib/core/compiler/mythryl-compiler-compilers-for-all-supported-platforms.lib} & visible compiler, backends and
bootstrap compilers for all architectures & always & no \\
\hline
{\tt \$/portable-graph.lib} & definition of ``portable dependency graph'' data
package & always & no \\
\hline
{\tt \$/portable-graph-stuff.lib} & utility routines for use with portable
dependency graphs & optional & no
\end{tabular}
\end{center}
\end{small}

\subsection{Internal libraries}

For completeness, here is the list of other libraries that are part of
the compiler's implementation:

\begin{small}
\begin{center}
\begin{tabular}{p{2.5in}||p{2.6in}|c|c}
name & description & installed & loaded \\
\hline\hline
{\tt \$LIB7_LOWER/lib.lib} & utility library for lowhalf backend & always &
no \\
\hline 
{\tt \$LIB7_LOWER/control.lib} & control facilities for lowhalf backend &
always & no \\
\hline
{\tt \$LIB7_LOWER/Graphs.lib} & control flow graphs for lowhalf backend &
always & no \\
\hline
{\tt \$LIB7_LOWER/visual.lib} & visualization for lowhalf & always & no \\
\hline
{\tt \$LIB7_LOWER/lowhalf.lib} & architecture-neutral core of lowhalf backend
& always & no \\
\hline
{\tt \$LIB7_LOWER/treecode.lib} & utility routines for dealing with
treecode data structures & always & no \\
\hline
{\tt \$LIB7_LOWER/pwrpc32.lib} & PowerPC-specific lowhalf backend & always & no \\
\hline
{\tt \$LIB7_LOWER/sparc32.lib} & Sparc32-specific lowhalf backend & always & no \\
\hline 
{\tt \$LIB7_LOWER/../intel32/backend-intel32.lib} & INTEL32-specific lowhalf backend & always & no \\
\hline\hline
{\tt \$/pickle.lib} & utility library for compiler and makelib & always & no \\
\hline
{\tt \$ROOT/src/lib/core/viscomp/core.sublib} & architecture-neutral core of compiler
& always & no \\
\hline
{\tt \$ROOT/src/lib/compiler/mythryl-compiler-support-for-pwrpc32.lib} & PowerPC32-specific version of compiler &
always & no \\
\hline
{\tt \$ROOT/src/lib/compiler/mythryl-compiler-support-for-sparc32.lib} & Sparc32-specific version of compiler &
always & no \\
\hline
{\tt \$ROOT/src/lib/compiler/mythryl-compiler-support-for-intel32.lib} & intel32-specific version of compiler & always
& no \\
\hline \hline
{\tt \$ROOT/src/lib/core/init/init.cmi} & initial ``glue''; implementation of
pervasive environment & always & no \\
\hline \hline
{\tt \$ROOT/src/lib/core/internal/makelib-apis.lib} & apis {\tt makelib} and {\tt
make_mythryl_compiler} & always & no \\
\hline
{\tt \$ROOT/src/lib/core/internal/srcpath.sublib} & implementation of an internal
``source path'' abstraction used by the compilation manager & always &
no \\
\hline
{\tt \$ROOT/src/lib/core/internal/makelib-lib.lib} & implementation of makelib 
(not yet specialized to specific backends) & always & no \\
\hline
{\tt \$ROOT/src/lib/core/internal/makelib-internal.lib} & specialization of compilation manager
to host compiler & always &
no \\
\hline
{\tt \$ROOT/src/lib/core/internal/interactive-system.lib} & root library, containing
interactive system and glue for all the other parts & always &
no
\end{tabular}
\end{center}
\end{small}

Libraries for the lowhalf backend have internal dependencies.  However,
when referring to a {\tt \$LIB7_LOWER/{\it lib}.lib} library, all
anchor names that correspond to these dependencies are still unbound.
Thus, a client would have to provide its own namings for
them.\footnote{The anchor names coincide with the {\it lib}{\tt .lib}
components of the above names.} There is an analogous set of library
names of the form {\tt \$ROOT/src/lib/core/lower/}{\it lib}{\tt .lib} which
provides the backend-specific namings for all the anchors.  In
practice this means that if one refers to, e.g., {\tt
\$ROOT/src/lib/core/lower/lowhalf.lib}, one will implicitly pick up {\tt
\$ROOT/src/lib/core/lower/Graphs.lib}, and the {\tt \$Graphs.lib} anchor within the
former will be resolved to the latter.  On the other hand, when
referring directly to the ``raw'' library {\tt
\$LIB7_LOWER/lowhalf.lib}, one still can (and must) provide one's own
naming for {\tt \$Graphs.lib}.
