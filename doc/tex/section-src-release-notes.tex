
% --------------------------------------------------------------------------------
\subsection{Release 7.2.0}
\cutdef*{subsubsection}
\label{section:src:release-7.2.0}

Version 2015-12-06-07.50.40

This release includes a massive rewrite of the native widget support framework 
and of the widgets proper, including a good start on emacs-style program editing 
functionality done in heavily concurrent style.


\cutend*

% --------------------------------------------------------------------------------
\subsection{Release 7.1.0}
\cutdef*{subsubsection}
\label{section:src:release-7.1.0}

Version 2013-04-13-13.50.08

This release renames many of the critical functions in the inter-microthread 
mail system (derived from John H Reppy's "Concurrent ML") to favor clarity over 
brevity.

This release also fixes two bad bugs in 7.0.0:  A compiler hang that would appear 
one every hour or so of compile time, and a memory leak.

The hang was due to 
insufficient care in microthread-preemptive-scheduler.pkg when accepting and 
processing inter-hostthread messages.

The memory leak was due to wrapping the 
outer loop of io-bound-task-hostthreads.pkg in an 'except' clause. (Duplicated 
in cpu-bound-task-hostthreads.pkg and io-wait-hostthread.pkg.)


\cutend*

% --------------------------------------------------------------------------------
\subsection{Release 7.0.0}
\cutdef*{subsubsection}
\label{section:src:release-7.0.0}

Version 2013-03-12-15.37.49

This release makes concurrent programming the standard paradigm instead 
of an option --- which represents about a year's integration work.  This is essentially 
Mythryl 1.0, with all the good and bad implications of that, but calling a 30-year-old 
codebase "1.0" would be a bit silly, hence the "7.0.0".

\cutend*



% --------------------------------------------------------------------------------
\subsection{Release 6.2.0}
\cutdef*{subsubsection}
\label{section:src:release-6.2.0}

Version dist-2012-03-24-21.20.36

This release mainly fixes an obscure but irritating memory-trashing heisenbug 
in {\tt src/c/heapcleaner/make-package-literals-via-bytecode-interpreter.c} 
triggered primarily by loading of compiled files containing constant strings 
longer than 64KB --- most commonly generated by mythryl-yacc and mythryl-lex. 

This release adds some additional support for posix-threads in the form of\newline
\ahrefloc{src/lib/std/src/hostthread/cpu-bound-task-hostthreads.pkg}{src/lib/std/src/hostthread/cpu-bound-task-hostthreads.pkg}\newline
\ahrefloc{src/lib/std/src/hostthread/io-bound-task-hostthreads.pkg}{src/lib/std/src/hostthread/io-bound-task-hostthreads.pkg}\newline
\ahrefloc{src/lib/std/src/hostthread/io-wait-hostthread.pkg}{src/lib/std/src/hostthread/io-wait-hostthread.pkg}\newline

This will likely be the last Mythryl release in which concurrent and parallel  
programming support are optional rather than integrated into the core distribution.

\cutend*


% --------------------------------------------------------------------------------
\subsection{Release 6.1.0}
\cutdef*{subsubsection}
\label{section:src:release-6.1.0}

Version dist-2011-11-30-23.31.31 

This release revives the multi-processing support introduced by 
\ahref{\morrisettandtolmach}{A Portable Multiprocessor Interface for Standard ML of New Jersey, Morrisett + Tolmach 1992 31p} 
which then quietly bitrotted for nearly twenty years.  The new version is untested but cleaner, thanks in part 
to use of modern Posix Threads support, which was unavailable in 1992.  The new version should properly handle hostthreads which 
do I/O and other blocking syscalls --- something which the original version did not address. 

This posix-threads support should allow some CPU-intensive tasks to speed up by 
a factor of two to four or so, but is mainly intended to support a clean implementation 
of threadkit ("CML") access to blocking I/O.  (Also Gtk and similar libraries.) 

The notion is to keep GUI response snappy by having slow tasks like 
socket I/O and matrix inversion done in sacrificial worker hostthreads, 
while the threadkit GUI code (and similar non-CPU-intensive 
application code) runs full speed in the main hostthread.  (For more 
information see {\tt src/A.HOSTTHREAD-SUPPORT.OVERVIEW} in the sourcetree.) 

\cutend*




% --------------------------------------------------------------------------------
\subsection{Release 6.0.0}
\cutdef*{subsubsection}
\label{section:src:release-6.0.0}

Version dist-2011-10-15-02.45 

Codebase now does {\tt make compiler}, {\tt make rest}, {\tt sudo make install}, {\tt make check}, {\tt make benchmarks} 
entirely without warnings.  This marks the completion of the Great Cleanup Era and the start of normal development. 

\cutend*



% --------------------------------------------------------------------------------
\subsection{Release 5.3.0}
\cutdef*{subsubsection}
\label{section:src:release-5.3.0}

Version 2011-10-01-06.01.04

First parallel-compiles release behaved badly on compile errors; 
this is basically Parallel Compiles Take Two.  I also almost 
completely rewrote the \ahrefloc{src/lib/std/src/posix/spawn--premicrothread.api}{src/lib/std/src/posix/spawn--premicrothread.api} 
api per suggestion from Joe Wells. 

As before, if parallel compiles act up, they 
can be disabled by setting {\tt compile\_in\_subprocesses} to 
{\tt FALSE} in  \ahrefloc{src/lib/compiler/toplevel/main/compiler-controls.pkg}{src/lib/compiler/toplevel/main/compiler-controls.pkg} 
and recompiling, or doing 
\begin{verbatim}
eval:  set_control "compiler::compile_in_subprocesses" 	"FALSE";
\end{verbatim}
at the Mythryl interactive prompt. 

\cutend*





% --------------------------------------------------------------------------------
\subsection{Release 5.2.0}
\cutdef*{subsubsection}
\label{section:src:release-5.2.0}

Version 2011-09-29-20.11.35

Changed to compile by forking() off subprocesses.  On a 
six-core box this cuts wallclock time for {\tt make compiler} 
from two and a half minutes to one and a half minutes.  This 
can be disabled by setting {\tt compile\_in\_subprocesses} to 
{\tt FALSE} in \ahrefloc{src/lib/compiler/toplevel/main/compiler-controls.pkg}{src/lib/compiler/toplevel/main/compiler-controls.pkg} 
or doing 
\begin{verbatim}
eval:  set_control "compiler::compile_in_subprocesses" 	"FALSE";
\end{verbatim}
at the Mythryl interactive prompt. 

\cutend*




% --------------------------------------------------------------------------------
\subsection{Release 5.1.0}
\cutdef*{subsubsection}
\label{section:src:release-5.1.0}

Version 2011-09-27-01.27.54 

Renamed {\tt tracing.pkg} -> {\tt logger.pkg} and did a major 
overhaul, in particular integrating it with the previously 
unrelated monothread logging facility.  For details see 
{\tt src/A.LOGGER.OVERVIEW} in the source tree. 

\cutend*



% --------------------------------------------------------------------------------
\subsection{Release 5.0.0}
\cutdef*{subsubsection}
\label{section:src:release-5.0.0}

Version 2011-09-17-13.02.52.

This is an inflection-point release marking the switch from several 
years of compiler-internals work and cleanup to several years of 
primarily more applied work like applications and library bindings. 


The major user-visible difference from the  
\ahrefloc{section:src:release-4.2.0}{preceding 4.2.0 release} is 
the addition of support for compile-time compiler-control setting 
in source files via {\tt #DO} syntax, in particular 

\begin{verbatim}
    #DO set_control "compiler::verbose_compile_log" 	"TRUE";
    #DO set_control "compiler::trap_int_overflow"   	"TRUE";
    #DO set_control "compiler::check_vector_index_bounds"   "FALSE";
\end{verbatim}

For more information on these see (respectively) 
\ahrefloc{section:tut:full-monte:pre-compile-code}{Pre-Compile Code}, 
\ahrefloc{section:tut:full-monte:int-overflow-checking}{Int Overflow Checking} and 
\ahrefloc{section:tut:full-monte:vector-index-bounds-checking}{Vector Index Bounds Checking}. 

This release also marks the introduction of the (currently skeletal) Mythryl benchmark 
suite, which may be compiled and run by entering {\tt make benchmarks} at the Linux 
prompt in the root directory of the source distribution. 

\cutend*




% --------------------------------------------------------------------------------
\subsection{Release 4.2.0}
\cutdef*{subsubsection}
\label{section:src:release-4.2.0}

Version 2011-09-06-04.12.17.

This is a minor release --- more renaming of number and vector classes:

\begin{verbatim}
    src/lib/std/eight-byte-float.pkg

    src/lib/std/multiword-int.pkg
    src/lib/std/src/two-word-int.pkg
    src/lib/std/tagged-int.pkg
    src/lib/std/one-word-int.pkg

    src/lib/std/one-byte-unt.pkg
    src/lib/std/one-word-unt.pkg
    src/lib/std/src/two-word-unt.pkg

    src/lib/std/vector-of-chars.pkg
    src/lib/std/float-vector-slice.pkg
    src/lib/std/rw-vector-of-chars.pkg
    src/lib/std/rw-float-vector-slice.pkg
    src/lib/std/src/rw-vector-slice.pkg
    src/lib/std/src/vector-slice-of-chars.pkg
    src/lib/std/src/rw-vector-slice-of-chars.pkg
    src/lib/std/src/vector-of-eight-byte-floats.pkg
    src/lib/std/src/rw-vector-of-one-byte-unts.pkg
    src/lib/std/src/rw-vector-slice-of-one-byte-unts.pkg
    src/lib/std/src/vector-of-chars.pkg
    src/lib/std/src/vector.pkg
    src/lib/std/src/vector-slice.pkg
    src/lib/std/src/vector-of-one-byte-unts.pkg
    src/lib/std/src/vector-slice-of-one-byte-unts.pkg
    src/lib/std/src/rw-vector-of-chars.pkg
    src/lib/std/src/vector-slice-of-eight-byte-floats.pkg
    src/lib/std/src/rw-vector-of-eight-byte-floats.pkg
    src/lib/std/src/rw-vector-slice-of-eight-byte-floats.pkg
    src/lib/std/src/rw-vector.pkg
\end{verbatim}

\cutend*



% --------------------------------------------------------------------------------
\subsection{Release 4.0.1}
\cutdef*{subsubsection}
\label{section:src:release-4.0.1}

Version 2011-09-03-12.42.31.

This is a minor release.

The main user-visible change is that most major integer types have been 
renamed in anticipation of future support for 64-bit implementations:

\begin{verbatim}
    int31  -> tagged_int
    unt31  -> tagged_unt

    int32  -> one_word_int
    unt32  -> one_word_unt

    int64  -> two_word_int
    unt64  -> two_word_unt
\end{verbatim}

The general pattern is that int types are now named in terms of their 
length in machine words rather than in terms of their length in bits: 
{\tt one\_word\_int} will be 32 bits on 32-bit architectures but 64 bits on 64-bit 
architectures.

\cutend*



% --------------------------------------------------------------------------------
\subsection{Release 4.0.0}
\cutdef*{subsubsection}
\label{section:src:release-4.0.0}

Version 2011-08-04-00.23.13.

This is a major release, representing about twenty month's 
effort cleaning up the source code for the back end of the 
compiler.  Compressed tarball size has increased from 
13231618 to 16472194 bytes, due almost entirely to added comments. 

User-visible changes are minor, the most important being that 
the file extensions {\tt .make6} {\tt .o7} and {\tt .a7} have changed to 
{\tt .lib} {\tt .compiled} and {\tt .frozen} respectively for increased clarity. 

Internally in the backend sourcetree there has been so much moving 
and renaming of subdirectories and files as to make diffing the 
previous and current version just about impossible, and so many 
changes within the files as to make such diffing mostly pointless. 

\cutend*


% --------------------------------------------------------------------------------
\subsection{Release 3.0.2}
\cutdef*{subsubsection}
\label{section:src:release-3.0.2}

Version 2009-09-07-11.47.45.

This is a very minor release: Commented out some debug print statements 
in expand-oop-syntax2.pkg, removed some junk files.

\cutend*


% --------------------------------------------------------------------------------
\subsection{Release 3.0.1}
\cutdef*{subsubsection}
\label{section:src:release-3.0.1}

Version 2009-09-06-02.10.30.

This is a minor bugfix release.  The global overloaded 'max' function 
was actually computing 'min'.  Aso, the source code to the 
\ahrefloc{section:tut:fullmonte:parsing-combinators-i}{Parsing Combinators I} 
tutorial is now included.

\cutend*


% --------------------------------------------------------------------------------
\subsection{Release 3.0.0}
\cutdef*{subsubsection}
\label{section:src:release-3.0.0}

Version 2009-09-03-21.41.30.

This release implements 
\ahrefloc{section:tut:delving-deeper:list-comprehensions}{list comprehensions}. 

Other changes include adding {\tt is\_prime, factors, sum} and {\tt product} 
to {\sc API} {\tt Int}, implementing them in the packages implementing 
that API ({\tt tagged\_int.pkg, one-word-int.pkg, two-word-int.pkg} and {\tt multiword-int.pkg}), 
and adding {\tt isprime, factors, sum} and {\tt product} to {\tt scripting\_globals}.

\cutend*

% --------------------------------------------------------------------------------
\subsection{Release 2.0.1}
\cutdef*{subsubsection}
\label{section:src:release-2.0.1}

\begin{quote}\begin{tiny}
        ``To err is human --- but it feels divine!''\newline
\newline
         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~--- Mae West
\end{tiny}\end{quote}

Version 2009-08-25-12.40.50.

This is a bugfix minor release.  Aurelien pointed out that the Perl-inspired 
filetest operator mapping was

\begin{verbatim}
    -F    is_file
    -D    is_dir
    -P    is_pipe
    -L    is_symlink
    -C    is_char_dev
    -B    is_block_dev
    -S    is_socket
    -R    may_read
    -W    may_write
    -X    may_execute
\end{verbatim}

when due to renaming of the underlying globals the mapping should have been

\begin{verbatim}
    -F    isfile
    -D    isdir
    -P    ispipe
    -L    issymlink
    -C    ischardev
    -B    isblockdev
    -S    issocket
    -R    mayread
    -W    maywrite
    -X    mayexecute
\end{verbatim}

Fixed this.

Also fixed typos in the {\tt src/app/tut/test/test.pkg} 
and {\tt src/app/tut/factor/factor.pkg} tutorial 
examples and many typos and errors in the tutorials, all courtesy of Aurelien's vigilant 
proof-reading.

\cutend*

% --------------------------------------------------------------------------------
\subsection{Release 2}
\cutdef*{subsubsection}
\label{section:src:release-2}

\begin{quote}\begin{tiny}
        ``What a ship is, you know, it's not just a keel and a hull and a deck and sails.\newline
        ~~That is what a ship needs. But what a ship is --- really {\it is} --- is freedom.''\newline
\newline
         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~--- Johnny Depp as Captain Jack Sparrow, {\em Pirates of the Caribbean}
\end{tiny}\end{quote}

Version 2009-08-19-14.01.49.

Changes relative to previous release:
\begin{itemize}

\item First-cut OOP support.  {\tt class} is now a reserved word.
\item Added an ``Experimental Object Oriented Programming Support'' tutorial to the ``Full Monte'' section.
\item Added a ``Roll-Your-Own Objected Oriented Programming'' tutorial to the ``Delving Deeper'' section.

\item Website html pages were previously sequentially numbered; this meant that 
in general each doc revision changed the names of many pages, defeating deep 
linking.  Page names are now derived from page titles, making them much more 
stable over time.

\item Syntax finalization, including:
\begin{itemize}
\item (IMPORTANT!)  The list-forming ("cons") operator is now '!' instead of '.' --- the latter will be needed for dot-product soon.
\item Elimination of a number of reserved words:
\begin{itemize}
\item {\tt op} is no longer a reserved word.  To pass an infix operator as an argument, write {\tt (+)} instead of {\tt (op +)}.
\item {\tt type} is no longer a reserved word.
\item {\tt generic} is no longer a reserved word.  Write {\tt generic package foo ...} instead of {\tt generic foo ...}.
\item {\tt generic\_api} is no longer a reserved word.  Write {\tt generic api Foo ...} instead of {\tt generic\_api Foo ...}.
\item {\tt rec} is no longer a reserved word.  Write {\tt recursive my ...} instead of {\tt val rec ...}. (NB: {\tt recursive} is not a reserved word.)
\item {\tt raise} is no longer a reserved word.  Write {\tt raise exception FOO ...} instead of {\tt raise FOO ...}.
\item {\tt infix} is no longer a reserved word.  To declare an operator infix use {\tt infix my ...} instead of {\tt infix ...}.
\item {\tt infixr} is no longer a reserved word.  To declare an operator right-associative infix use {\tt infixr my ...} instead of {\tt infixr ...}.
\item {\tt nonfix} is no longer a reserved word.  To declare an operator non-infix use {\tt nonfix my ...} instead of {\tt nonfix ...}.
\item {\tt overload} is no longer a reserved word. Syntax to declare an overloaded opeerator now looks like:
\begin{verbatim}
    overloaded my + :   ((X, X) -> X)
        =
        ( tagged_int::(+),
          one_word_int::(+),
          two_word_int::(+),
          intgr::(+),
          tagged_unt::(+),
          strcat,
          one_word_unt::(+),
          two_word_unt::(+),
          flt64::(+),
          unt08plus
        );

\end{verbatim}
\end{itemize}
\end{itemize}
\item Support for incremental addition of functions to overloaded operators. Just use '+=' instead of '=' in above syntax.
\item Improved support for conventional vector/matrix notation:
\begin{itemize}
\item {\tt matrix[i,j]} is now supported. ({\tt vector[i]} was already supported.)
\item {\tt matrix[i,j] := ... } and {\tt vector[i] := ... } are now supported.
\end{itemize}
\item Fixed various documentation bugs pointed out by Aurelien and Phil Rand --- thanks!
\item Incorporated a portability bugfix contributed by Pippijn van Steenhoven --- thanks!
\end{itemize}

We now have thirty-one alphabetic reserved words:
\begin{quotation}
{\tt also and api as case class elif else end eqtype esac except 
exception fi for fprintf fun herein if include my or package printf 
sharing sprintf stipulate then where with withtype}
\end{quotation}
This is a small enough set to be reasonably easily learned.  Few of 
them are common nouns or verbs likely to be wanted by application programmers 
as identifiers: the main offenders are {\tt api, case, class, end, exception, package} and {\tt val}, 
and none of them are easily dispensed with.  (I considered using "class package" 
instead of "class" but just could not warm up to it. We might eventually demote 
{\tt class} to being a \#DEFINE that expands to {\tt class package}.)

The reserved word {\tt eqtype} ise obsolescent and should be phased out 
eventually, but I wouldn't hold my breath.

The reserved words {\tt fprintf}, 
{\tt printf} and {\tt sprintf} should ideally be vanilla library functions, 
but they need special parser support not yet available in generic form to 
library functions, so I wouldn't hold my breath on that either.

The reserved words {\tt my} and {\tt val} are exactly synonymous.  The 
{\tt my} form is shorter when used alone; the {\tt val} form reads better 
when preceded by modifiers.

The reserved words {\tt class} and {\tt package} were synonymous for 
awhile, but the compiler does now cue on the difference between them 
to avoid scanning all packages for OOP constructs.

Thus, we might concievably eventually reduce the alphabetic reserved 
word count to perhaps thirty; we are unlikely to get below that.  I do 
not anticipate us adding reserved words in the foreseeable future; 
adding non-reserved modifiers to existing reserved words should 
satisfy our evolutionary needs.  (This is inspired by Larry Wall's 
focus on Perl evolvability by design, although the Mythryl 
approach is quite a bit different.)

\cutend*


% --------------------------------------------------------------------------------
\subsection{Release 1}
\cutdef*{subsubsection}
\label{section:src:release-1}

Version 2009-06-05-00.56.59.

Changes relative to parent {\sc SML/NJ} 110.58 codebase include:
\begin{itemize}
\item Support for script-style execution via {\tt#! /usr/bin/mythryl} shebang lines.
\item Support for script/commandline execution: {\tt `my -x '\\()'`}.
\item New, more C-like syntax.
\item Codebase converted to new syntax.
\item Extensive codebase cleanup including renaming, formatting, commenting, cross-referencing and directory rationalization.
\item Conventional makefile-driven build procedure.
\item Conventional tarball-based, gnu autoconfig driven install procedure.
\item {\tt if} and {\tt else} clauses are implicit blocks to reduce syntactic clutter.
\item {\tt else} clauses may be omitted, defaulting to {\tt ()}.
\item C-inspired {\tt ?? ::} conditional.
\item C-inspired {\tt for} loop.
\item C-inspired {\tt printf/sprintf/fprintf}.
\item Perl-inspired backquote operator.
\item Perl-compatible regular expressions out of box.
\item Heap images executable without wrapper scripts via embedded shebang line.
\item Many reserved words returned to vanilla identifier space, including '|', 'do', 'let' and 'in'.
\item {\tt esac} terminator for {\tt case}, {\tt fi} terminator for {\tt if}, {\tt elif} support.
\item Misspelled constructors in case patterns no longer silent errors --- compiletime errors issued.
\end{itemize}

\cutend*

